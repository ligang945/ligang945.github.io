---
title: 我的上网配置
date: 2018-11-10 19:51:10
tags: Linux
categories: 代码
---

这里说的上网就是方便使用Google的那种上网啦，懂的自然懂，不懂的就算了~

### 简化ssh登陆操作
### 本机生成公钥密钥
本机敲`ssh-keygen`命令，一顿回车，在`~/.ssh`目录下会生成`id_rsa`和`id_rsa.pub`文件。

`id_rsa`是私钥，要保存好，谁也不给谁看；`id_rsa.pub`是公钥，稍后放到VPS上。

### VPS添加公钥
复制本机`id_rsa.pub`的内容，添加到VPS的`~/.ssh/authorized_keys`文件中。

然后就可以 `ssh root@1.2.3.4 -p 5678` 登陆到VPS了，不需要输入密码。

### VPS别名
输入`ssh root@1.2.3.4 -p 5678`登陆还是有点麻烦，继续配置。

在本机`~/.ssh/config`中添加以下内容：

```shell
Host
    vps
    HostName 1.2.3.4
    Port 5678
    User root
```
然后直接`ssh vps`就可以登陆了，十分方便~

### VPS软件
### shadowsocks_libev
我的VPS配置较低，所以选用C语言实现的shadowsocks_libev。

我用的是Teddysun的多合一`shadowsocks-all.sh`安装脚本，选择安装shadowsocks_libev。

安装完成后，再在根目录建一个配置文件的软连接：

```shell
ln -s /etc/shadowsocks-libev/config.json ~
```
这样修改配置文件就方便一点，免得记不住配置文件路径~

### haproxy
lkl 我的VPS是OpenVZ虚拟化，不能升级内核，所以想用BBR算法只能另寻他法。

我用的是Teddysun的`ovz-bbr-installer.sh`脚本，一键安装haproxy-lkl。

### simple-obfs
按github主页说明安装。 在ss的配置文件中启用：

```shell
"plugin":"obfs-server"
"plugin_opts":"obfs=tls"
```
### kcp
曾经用过，两端配置都比较麻烦。现在有了BBR，网速对我来说足够了，就不再用kcp了。

### pip 通过apt安装：
```shell
apt install python-pip -y
```
然后更新一下自己：

```shell
pip install pip -U --no-cache-dir
```
### youtube-dl
```shell
pip install youtube-dl -U --no-cache-dir
```
有了它就可以愉快的下载Youtube视频了。

### ffmpeg
```shell
apt install ffmpeg -y
```
音频视频编解码器，安装它是为了让youtube-dl能够合并视频和音频。

### 软件更新
VPS保持软件更新很重要，不过经常敲命令也手疼，写个脚本保护一下手指：

```shell
apt update; apt full-upgrade -y; apt autoremove -y
pip install youtube-dl -U --no-cache-dir
